[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Payment Entry",
  "enabled": 1,
  "modified": "2021-10-18 15:21:51.791577",
  "name": "Payment Entry-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Payment Entry', {\n// \trefresh(frm) {\n// \t\t// your code here\n// \t},\n\tonload(frm)\n\t{\n\t   frm.set_value(\"mode_of_payment\",\"Cash\");\n\t   \n\t}\n\t    \n\t    \n\t    \n\t    \n\t\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2021-10-19 17:50:59.123304",
  "name": "Item-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Group",
  "enabled": 1,
  "modified": "2021-10-19 17:53:28.381685",
  "name": "Item Group-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item Group', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });\n\n\n\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Brand",
  "enabled": 1,
  "modified": "2021-10-19 17:55:24.311677",
  "name": "Brand-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Brand', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "UOM",
  "enabled": 1,
  "modified": "2021-10-19 17:55:49.420430",
  "name": "UOM-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('UOM', {\n\t\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Drug Content",
  "enabled": 1,
  "modified": "2021-10-19 17:56:21.200390",
  "name": "Drug Content-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "\nfrappe.ui.form.on('Drug Content', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Prescription Drug Class",
  "enabled": 1,
  "modified": "2021-10-19 17:56:23.373442",
  "name": "Prescription Drug Class-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Prescription Drug Class', {\n\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Tax Template",
  "enabled": 1,
  "modified": "2021-10-19 17:57:02.482176",
  "name": "Item Tax Template-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item Tax Template', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Manufacturer",
  "enabled": 1,
  "modified": "2021-10-19 17:57:06.824637",
  "name": "Manufacturer-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "\nfrappe.ui.form.on('Manufacturer', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Packing Type",
  "enabled": 1,
  "modified": "2021-10-19 17:57:45.697722",
  "name": "Item Packing Type-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item Packing Type', {\n\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Supplier",
  "enabled": 1,
  "modified": "2021-10-19 18:00:35.173681",
  "name": "Supplier-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Supplier', {\n\t\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Address",
  "enabled": 0,
  "modified": "2021-07-14 12:27:08.273767",
  "name": "Address-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Address', {\n  onload(frm) {\n\t\tcheck_customer(frm);\n\t},refresh(frm) {\n\t\tcheck_customer(frm);\n\t},\n  validate(frm){\n    check_customer(frm);\n  }\n\n});\n\nvar check_customer = function(frm){\n  $.each(frm.doc.links || [], function(i, v) {\n    console.log(\"test1\");\n    frappe.call({\n         method: 'frappe.client.get',\n         args: {\n             'doctype': 'Customer',\n             'filters': {'name': v.link_name}\n         },\n         callback: function(r){\n            if(r.message.customer_type == \"Business\"){\n              frm.set_df_property('tax_category', 'reqd', 1);\n              frm.set_df_property('gstin', 'reqd', 1);\n              frm.set_df_property('gst_state', 'reqd', 1);\n              frm.set_df_property('gst_state_number', 'reqd', 1);\n              frm.refresh_field('tax_category');\n              frm.refresh_field('gstin');\n              frm.refresh_field('gst_state_number');\n              frm.refresh_field('gst_state');\n            }\n         }\n    });\n  });\n};\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Price",
  "enabled": 0,
  "modified": "2021-10-05 16:26:47.575577",
  "name": "Item Price-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item Price', {\n\tvalidate(frm) {\n\t\tif(frm.doc.price_list_2!==\"\"){\n\t\t    if(frm.doc.price_list_2==\"Price To Franchaisee - (PTF)\"){\n\t\t        msgprint(\"Price List 2 Added Successfully\");\n\t\t    }\n\t\t}\n\t\tif(frm.doc.price_list_3!==\"\"){\n\t\t    if(frm.doc.price_list_3==\"Price To Customer - (PTC)\"){\n\t\t        msgprint(\"Price List 3 Added Successfully\");\n\t\t    }\n\t\t}\n\t},\n    after_save(frm) {\n        var pp=frappe.get_list(\"Item Price\");\n        console.log('kkkkkkkkkkkkkkkkkkkkkk');\n        console.log('999999999999999=============',pp);\n        console.log('itemcode ====',pp[0].item_code);\n        console.log('pricelist====',pp[0].price_list);\n        console.log('pricelist Rate====',pp[0].price_list_rate);\n        console.log('pricelist2===',pp[0].price_list_2);\n        console.log('pricelist3===',pp[0].price_list_3);\n        console.log('pricelist Rate 2===',pp[0].rate_for_price_list_2);\n        console.log('pricelist Rate 3===',pp[0].rate_for_price_list_3);\n        frappe.db.insert({\n            doctype: 'Item Price',\n            item_code:pp[0].item_code,\n            price_list:pp[0].price_list_2,\n            price_list_rate:pp[0].rate_for_price_list_2\n        }).then(function(doc) { \n            console.log(`${doc.doctype} ${doc.name} created on ${doc.creation}`);\n        });\n        frappe.db.insert({\n            doctype: 'Item Price',\n            item_code:pp[0].item_code,\n            price_list:pp[0].price_list_3,\n            price_list_rate:pp[0].rate_for_price_list_3\n        }).then(function(doc) { \n            console.log(`${doc.doctype} ${doc.name} created on ${doc.creation}`);\n        });\n    }   \n});\t",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 1,
  "modified": "2021-10-26 17:30:53.858283",
  "name": "Sales Invoice-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "var r;\nvar i;\nfrappe.ui.form.on('Sales Invoice Item', {\n\trate: function(frm, cdt,cdn) {\n\t\tvar d = locals[cdt][cdn];\n\t\tr=d.rate;\n\t\tfrm.trigger('selling_price_list');\n\t\n\t},\n    item_code:function(frm,cdt,cdn)\n    {\n        var d3=locals[cdt][cdn];\n        var r=d3.item_code;\n        var d=locals[cdt][cdn];\n        var pp=d.default_mrp\n        var w3=d.default_strip_conversion_factor\n        var tyr=pp/w3\n        frappe.model.set_value(cdt,cdn,\"mrp\",tyr)\n\t    frappe.call({\n\t        \"method\":\"frappe.client.get\",\n\t        \"args\":{\n\t            \"doctype\":\"Item Price\",\n\t            \"filters\":{\"item_code\":d.item_code,\"batch_no\":d.batch_no,\"price_list\":\"Price To Customer - (PTC)\"},\n\t            \"fields\":[\"price_list_rate\"]\n\t        },\n\t        callback:function(r){\n\t            if(r){\n\t                frappe.model.set_value(cdt,cdn,\"price_to_customer\",r.message.price_list_rate)\n\t            }\n\t        }\n\t    })\n        frappe.call({\n            \"method\":\"frappe.client.get\",\n            \"args\":{\n                \"doctype\":\"Item\",\n                \"filters\":{\"item_code\":r},\n               \n            },\n            callback:function(u)\n             {\n                 if(u)\n                 {\n                     var d13=u.message.uoms\n                     var lastElement = d13[d13.length - 1];\n                     frappe.model.set_value(cdt,cdn,\"default_strip_conversion_factor\",lastElement.conversion_factor)\n                 }\n             }\n        })\n    },\n\tposa_is_offer:function(frm,cdt,cdn){\n        var d=locals[cdt][cdn];\n        if(d.posa_is_offer==1){\n            frappe.model.set_value(cdt,cdn,\"rate\",0)\n        }\n        if(d.posa_is_offer===0){\n            frappe.model.set_value(cdt,cdn,\"rate\",r)\n        }\n\t},\n\tbatch_no:function(frm,cdt,cdn){\n\t    var d=locals[cdt][cdn];\n\t    var pp=d.default_mrp\n        var w3=d.default_strip_conversion_factor\n        var tyr=pp/w3\n        frappe.model.set_value(cdt,cdn,\"mrp\",tyr)\n\t    frappe.call({\n\t        \"method\":\"frappe.client.get\",\n\t        \"args\":{\n\t            \"doctype\":\"Item Price\",\n\t            \"filters\":{\"item_code\":d.item_code,\"batch_no\":d.batch_no,\"price_list\":\"Price To Customer - (PTC)\"},\n\t            \"fields\":[\"price_list_rate\"]\n\t        },\n\t        callback:function(r){\n\t            if(r){\n\t                frappe.model.set_value(cdt,cdn,\"price_to_customer\",r.message.price_list_rate)\n\t            }\n\t        }\n\t    })\n\t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Receipt",
  "enabled": 1,
  "modified": "2021-09-30 20:52:37.801762",
  "name": "Purchase Receipt-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Purchase Receipt', {\n\trefresh(frm) {\n\t\t// your code here\n\t}\n});\n\nvar tt;\nvar ii;\nvar bb;\nfrappe.ui.form.on(\"Purchase Receipt Item\",{\n    rate:function(frm,cdt,cdn){\n        var d2=locals[cdt][cdn]\n        if(d2.rate>0){\n            tt=d2.rate;\n            console.log(tt)\n        }\n    },\n    free:function(frm,cdt,cdn){\n        var d=locals[cdt][cdn];\n        if(d.free==1){\n            frappe.model.set_value(cdt,cdn,\"rate\",0)\n        }\n        if(d.free==0){\n            frappe.model.set_value(cdt,cdn,\"rate\",tt)\n        }\n    },\n    discount:function(frm,cdt,cdn){\n        var d1=locals[cdt][cdn];\n        if(d1.discount>0){\n            console.log(\"Discount Entered\")\n            var result=d1.rate-d1.rate*d1.discount/100\n            frappe.model.set_value(cdt,cdn,\"rate\",result)\n        }\n    },\n    item_code:function(frm,cdt,cdn){\n        var d3=locals[cdt][cdn];\n        console.log(d3.item_code)\n        ii=d3.item_code;\n        if(d3.item_code.charAt(0)==\"E\"){\n            var p1=[];\n            console.log(\"External Item Added\",ii)\n            frappe.call({\n                \"method\" : \"frappe.client.get_list\",\n                \"args\" : {\n                    \"doctype\" : \"Item\",\n                    \"filters\" : {\"item_code\":ii},\n                    \"fields\"  :[\"drug_content\"] \n                },\n                callback:function(r){\n                    if(r){\n                        console.log(r)\n                        p1=r.message[0].drug_content\n                        console.log(\"r1r1r1r1r1rr\",p1);\n                        frappe.call({\n                            \"method\":\"frappe.client.get_list\",\n                            \"args\":{\n                                \"doctype\":\"Item\",\n                                \"filters\":{\"drug_content\":p1,\"purchase_type\":\"Internal\"},\n                                \"fields\":[\"item_name\"]\n                            },\n                            callback:function(r1){\n                                console.log(\"Internal Item\",r1)\n                                var neww=r1.message;\n                                var neww2=[];\n                                for( var i=0;i<neww.length;i++){\n                                    console.log(neww[i].item_name)\n                                    var neww1=neww[i].item_name;\n                                    neww2.push(neww1)\n                                }\n                                console.log(\"weeeeeeeeeeeeeeeeeeeeeeeee\",neww2);\n                                frappe.msgprint({\n                                    title:__('Notification'),\n                                    indicator:'green',\n                                    message:__(\"You have similar Product in Storegenrix:\"+neww2)\n                                })\n                            }\n                        })\n                    }\n                }\n            })\n        }\n    },\n    batch_no:function(frm,cdt,cdn){\n        var d6=locals[cdt][cdn];\n        console.log(d6.batch_no)\n        bb=d6.batch_no;\n        frappe.call({\n            \"method\":\"frappe.client.get_list\",\n            \"args\":{\n                \"doctype\":\"Item Price\",\n                \"filters\":{\"item_code\":ii,\"batch_no\":bb},\n                \"fields\":[\"price_list\",\"price_list_rate\"]\n            },\n            callback:function(r){\n                if(r){\n                    if(r.message.length==0){\n                        frappe.model.set_value(cdt,cdn,\"company_buying_rate\",\"None\")\n                        frappe.model.set_value(cdt,cdn,\"price_to_franchise_rate\",\"None\")\n                        frappe.model.set_value(cdt,cdn,\"price_to_customer_rate\",\"None\")\n                    }\n                    console.log(\"baatches item pricee\",r)\n                    for(var i=0;i<r.message.length;i++){\n                        if(r.message[i].price_list==\"Company Buying\"){\n                            frappe.model.set_value(cdt,cdn,\"company_buying_rate\",r.message[i].price_list_rate)\n                        }\n                        if(r.message[i].price_list==\"Price To Franchaisee - (PTF)\"){\n                            frappe.model.set_value(cdt,cdn,\"price_to_franchise_rate\",r.message[i].price_list_rate)\n                        }\n                        if(r.message[i].price_list==\"Price To Customer - (PTC)\"){\n                            frappe.model.set_value(cdt,cdn,\"price_to_customer_rate\",r.message[i].price_list_rate)\n                        }\n                    }\n                }\n            }\n        })\n    },\n    set_prices:function(frm,cdt,cdn){\n        console.log(\"Set Priceeeeeeeeeees\")\n        let d5=new frappe.ui.Dialog({\n            title:\"Set Prices\",\n            fields:[\n                {\n                   label:\"Item Code\",\n                   fieldname:'item',\n                   fieldtype:'Data',\n                },\n                {\n                   label:\"Company Buying Rate\",\n                   fieldname:'c_b_r',\n                   fieldtype:'Data',\n                },\n                {\n                   label:\"Price to Franchise(PTF)\",\n                   fieldname:'ptf',\n                   fieldtype:'Data',\n                },\n                {\n                   label:\"Price to Customer(PTC)\",\n                   fieldname:'ptc',\n                   fieldtype:'Data',\n                },\n                {\n                   label:\"Batch Name\",\n                   fieldname:'batch',\n                   fieldtype:'Data',\n                },\n                ],\n                primary_action_label:\"Add Prices\",\n                primary_action(values){\n                    console.log(values)\n                    frappe.db.insert({\n                        doctype:'Item Price',\n                        item_code:values.item,\n                        price_list:\"Company Buying\",\n                        price_list_rate:values.c_b_r,\n                        batch_no:values.batch\n                    })\n                    frappe.db.insert({\n                        doctype:'Item Price',\n                        item_code:values.item,\n                        price_list:\"Price To Franchaisee - (PTF)\",\n                        price_list_rate:values.ptf,\n                        batch_no:values.batch\n                    })\n                    frappe.db.insert({\n                        doctype:'Item Price',\n                        item_code:values.item,\n                        price_list:\"Price To Customer - (PTC)\",\n                        price_list_rate:values.ptc,\n                        batch_no:values.batch\n                    })\n                    msgprint(\"Prices added successfully\")\n                    d5.hide();\n                }\n        })\n        d5.show();\n        d5.fields_dict.item.set_value(ii);\n        d5.fields_dict.item.refresh();\n        d5.fields_dict.batch.set_value(bb);\n        d5.fields_dict.batch.refresh();\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Invoice",
  "enabled": 0,
  "modified": "2021-10-28 14:35:40.693653",
  "name": "Purchase Invoice-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Purchase Invoice', {\n\tonload(frm){\n\t\tvar batches=[];;\n        var dates=[];\n        if(frm.doc.supplier && frm.doc.company && frm.doc.supplier!==\"Internal Supplier SG\"){\n            frappe.call({\n                \"method\":\"frappe.client.get\",\n                \"args\":{\n                    \"doctype\":\"Purchase Receipt\",\n                    \"filters\":{\"company\":frm.doc.company,\"supplier\":frm.doc.supplier}\n                },\n                callback:function(r){\n                    if(r){\n                        console.log(r);\n                        console.log(r.message.items);\n                        var j=0;\n                        $.each(r.message.items, function(i, item) {\n                            console.log(\"egfegerf\");\n                            console.log(j);\n                            batches[j] = item.batch_no;\n                            dates[j]=item.batch_expiry_date;\n                            j=j+1;\n                            console.log(item.batch_no);\n                        });\n                        var j=0;\n                        console.log(batches);\n                        $.each(frm.doc.items, function(i, item) {\n                            item.batch_no=batches[j];\n                            item.expiry_date=dates[j];\n                            j=j+1;\n                        });\n                        frm.refresh_field(\"items\");\n                        frm.refresh();\n                    \n                    }\n                    else{\n                        return false;\n                    }\n                }\n            });\n        }\n        else{\n            console.log(\"Intercompany Purchase Invoice\");\n            frm.set_value(\"update_stock\",false);\n        }\n\t}\n});",
  "view": "Form"
 }
]