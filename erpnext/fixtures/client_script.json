[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Customer",
  "enabled": 1,
  "modified": "2021-10-28 10:30:19.336580",
  "name": "Customer-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Customer', {\n\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t},\n \tcustomer_name(frm)\n    {\n        var d1=frm.doc.customer_name;\n        console.log(d1);\n        var d2=d1.toUpperCase();\n        frm.set_value(\"customer_name\",d2);\n\n    }\n \t\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Payment Entry",
  "enabled": 1,
  "modified": "2021-10-18 15:21:51.791577",
  "name": "Payment Entry-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Payment Entry', {\n// \trefresh(frm) {\n// \t\t// your code here\n// \t},\n\tonload(frm)\n\t{\n\t   frm.set_value(\"mode_of_payment\",\"Cash\");\n\t   \n\t}\n\t    \n\t    \n\t    \n\t    \n\t\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2021-11-19 17:38:24.465334",
  "name": "Item-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item', {\n     onload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n     },\n     item_name(frm)\n    {\n        var d1=frm.doc.item_name;\n        console.log(d1);\n        var d2=d1.toUpperCase();\n        frm.set_value(\"item_name\",d2);\n\n    }\n\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Group",
  "enabled": 1,
  "modified": "2021-10-19 17:53:28.381685",
  "name": "Item Group-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item Group', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });\n\n\n\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Brand",
  "enabled": 1,
  "modified": "2021-10-19 17:55:24.311677",
  "name": "Brand-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Brand', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "UOM",
  "enabled": 1,
  "modified": "2021-10-19 17:55:49.420430",
  "name": "UOM-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('UOM', {\n\t\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Drug Content",
  "enabled": 1,
  "modified": "2021-10-19 17:56:21.200390",
  "name": "Drug Content-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "\nfrappe.ui.form.on('Drug Content', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Prescription Drug Class",
  "enabled": 1,
  "modified": "2021-10-19 17:56:23.373442",
  "name": "Prescription Drug Class-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Prescription Drug Class', {\n\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Tax Template",
  "enabled": 1,
  "modified": "2021-10-19 17:57:02.482176",
  "name": "Item Tax Template-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item Tax Template', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Manufacturer",
  "enabled": 1,
  "modified": "2021-10-19 17:57:06.824637",
  "name": "Manufacturer-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "\nfrappe.ui.form.on('Manufacturer', {\n \tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Packing Type",
  "enabled": 1,
  "modified": "2021-10-19 17:57:45.697722",
  "name": "Item Packing Type-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item Packing Type', {\n\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Supplier",
  "enabled": 1,
  "modified": "2021-10-19 18:00:35.173681",
  "name": "Supplier-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Supplier', {\n\t\tonload_post_render: function(frm) {\n         $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\n \t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Address",
  "enabled": 0,
  "modified": "2021-07-14 12:27:08.273767",
  "name": "Address-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Address', {\n  onload(frm) {\n\t\tcheck_customer(frm);\n\t},refresh(frm) {\n\t\tcheck_customer(frm);\n\t},\n  validate(frm){\n    check_customer(frm);\n  }\n\n});\n\nvar check_customer = function(frm){\n  $.each(frm.doc.links || [], function(i, v) {\n    console.log(\"test1\");\n    frappe.call({\n         method: 'frappe.client.get',\n         args: {\n             'doctype': 'Customer',\n             'filters': {'name': v.link_name}\n         },\n         callback: function(r){\n            if(r.message.customer_type == \"Business\"){\n              frm.set_df_property('tax_category', 'reqd', 1);\n              frm.set_df_property('gstin', 'reqd', 1);\n              frm.set_df_property('gst_state', 'reqd', 1);\n              frm.set_df_property('gst_state_number', 'reqd', 1);\n              frm.refresh_field('tax_category');\n              frm.refresh_field('gstin');\n              frm.refresh_field('gst_state_number');\n              frm.refresh_field('gst_state');\n            }\n         }\n    });\n  });\n};\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Price",
  "enabled": 1,
  "modified": "2021-11-26 15:55:03.343930",
  "name": "Item Price-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "var e;\r\nvar f;\r\nvar t;\r\nfrappe.ui.form.on('Item Price',\r\n{\r\n    onload(frm)\r\n    {\r\n        \r\n         e=frappe.defaults.get_user_defaults(\"Company\");\r\n         console.log(e[0]);\r\n        \r\n        \r\n        \r\n      if(e[0]==\"AVANZA\")\r\n      {\r\n          if(frm.doc.price_list_rate !==undefined)\r\n            {\r\n                cur_frm.set_df_property(\"price_list_2\", \"hidden\", true);\r\n                cur_frm.set_df_property(\"price_list_3\", \"hidden\", true);\r\n                cur_frm.set_df_property(\"rate_for_price_list_2\", \"hidden\", true);\r\n                cur_frm.set_df_property(\"rate_for_price_list_3\", \"hidden\", true);\r\n                 hidden=\"true\";\r\n             }\r\n            else\r\n            {\r\n             frm.set_value(\"price_list\",\"Company Buying\"); \r\n              msgprint(\"Please add item price in least UOM\");\r\n              hidden=\"false\";\r\n            }  \r\n       \r\n         \r\n             \r\n      }\r\n      else\r\n      { \r\n                    \r\n                    if(frm.doc.price_list_rate===undefined && frm.doc.rate_for_price_list_3===undefined)\r\n                        {\r\n                            // msgprint(\"Please add item price in least UOM\");\r\n                            \r\n                        //  msgprint(\"Please add item price in least UOM\");\r\n                        frm.set_value(\"price_list\",\"Price To Franchaisee - (PTF)\");\r\n                        cur_frm.set_df_property(\"price_list_2\", \"hidden\", true); \r\n                        cur_frm.set_df_property(\"rate_for_price_list_2\", \"hidden\", true);\r\n                        //  hidden=\"false\";\r\n                         }\r\n                    else\r\n                    {\r\n                        \r\n                        if(frm.doc.price_list==\"Price To Franchaisee - (PTF)\")\r\n                        {\r\n                            \r\n                            \r\n                          cur_frm.set_df_property(\"price_list_2\", \"hidden\", true); \r\n                          cur_frm.set_df_property(\"rate_for_price_list_2\", \"hidden\", true);\r\n                          cur_frm.set_df_property(\"price_list_3\", \"hidden\", true); \r\n                          cur_frm.set_df_property(\"rate_for_price_list_3\", \"hidden\", true);\r\n                        //   hidden=\"true\";\r\n                        }\r\n                        else\r\n                        {\r\n                           \r\n                            cur_frm.set_df_property(\"price_list_2\", \"hidden\", true); \r\n                            cur_frm.set_df_property(\"rate_for_price_list_2\", \"hidden\", true);\r\n                            cur_frm.set_df_property(\"price_list_3\", \"hidden\", true); \r\n                            cur_frm.set_df_property(\"rate_for_price_list_3\", \"hidden\", true);\r\n                            // hidden=\"true\";\r\n                            \r\n                        }\r\n                        \r\n                    }\r\n         \r\n                  \r\n                    \r\n      }\r\n     },\r\n    item_code:function(frm)\r\n    {\r\n    //   msgprint(\"Please add item price in least UOM\");\r\n        f=frm.doc.item_code\r\n        console.log(f)\r\n        frappe.call\r\n        ({\r\n          \"method\":\"frappe.client.get_list\",\r\n          \"args\":\r\n          {\r\n              \"doctype\":\"Item\",\r\n              \"filters\":{\"item_code\":f},\r\n              \"fields\":[\"purchase_type\"]\r\n              \r\n          },\r\n          callback:function(r)\r\n          {\r\n              if(r)\r\n              {\r\n                  console.log(r.message[0].purchase_type);\r\n                  t=r.message[0].purchase_type\r\n                  if(t==\"Internal\" && e==\"AVANZA\")\r\n                  {\r\n                    //  msgprint(\"Please add item price in Least UOM\");\r\n                     frm.set_value(\"price_list\",\"Company Buying\"); \r\n                     console.log(\"PARENT\")\r\n                  }\r\n                  else if(t==\"External\" && e==\"AVANZA\")\r\n                  {\r\n                    //   msgprint(\"Please add item price in Least UOM\");\r\n                      frm.set_value(\"price_list\",\"Price To Franchaisee - (PTF)\");\r\n                      \r\n                      cur_frm.set_df_property(\"price_list_2\", \"hidden\", true); \r\n                      cur_frm.set_df_property(\"rate_for_price_list_2\", \"hidden\", true);\r\n                      console.log(\"PARENT\")\r\n                  }\r\n                  else if(t==\"Internal\" && e!=\"AVANZA\")\r\n                  {\r\n                     msgprint(\"You Are Not Permitted To Add Internal Item Prices\")\r\n                     frm.set_value(\"price_list\",\"Price To Franchaisee - (PTF)\");\r\n                     console.log(\"CHILD\")\r\n                  }\r\n                  else if(t==\"External\" && e!=\"AVANZA\")\r\n                  {\r\n                    msgprint(\"Please add item price in Least UOM\");\r\n                    frm.set_value(\"price_list\",\"Price To Franchaisee - (PTF)\");  \r\n                    console.log(\"CHILD\")\r\n                  }\r\n              }\r\n          }\r\n        })\r\n    },\r\n    \r\n    batch_no:function(frm)\r\n    {\r\n      console.log(frm.doc.batch_no);\r\n      if(frm.doc.batch_no !==undefined)\r\n      {\r\n        frappe.call\r\n        ({\r\n          \"method\":\"frappe.client.get_list\",\r\n          \"args\":\r\n          {\r\n              \"doctype\":\"Item Price\",\r\n              \"filters\":{\"item_code\":cur_frm.doc.item_code,\"batch_no\":cur_frm.doc.batch_no},\r\n              \"fields\":[\"price_list\"]\r\n          },\r\n          callback:function(r)\r\n          {\r\n              if(r)\r\n              {\r\n                  console.log(r);\r\n                  console.log(cur_frm.doc.item_code);\r\n                  console.log(cur_frm.doc.batch_no);\r\n                  console.log(r);\r\n                  if(r.message.length !==0)\r\n                  {\r\n                      msgprint(\"Already exist price list of \"+ cur_frm.doc.item_name +\" in Batch  \"+ cur_frm.doc.batch_no);\r\n                  }\r\n                  \r\n              }\r\n          }\r\n            \r\n        });   \r\n      }\r\n     \r\n    },\r\n    \r\n    validate(frm) \r\n\t{\r\n\t    if(!frm.doc.item_code ||!frm.doc.batch_no||!frm.doc.price_list_rate ||!frm.doc.rate_for_price_list_3)\r\n\t    {\r\n\t        frappe.throw(\"Please fill mandatory fields..\");\r\n            frappe.validated = false;\r\n\t    }\r\n\t    else\r\n\t    {\r\n\t       frappe.call\r\n        ({\r\n          \"method\":\"frappe.client.get_list\",\r\n          \"args\":\r\n            {\r\n              \"doctype\":\"Item Price\",\r\n              \"filters\":{\"item_code\":cur_frm.doc.item_code,\"batch_no\":cur_frm.doc.batch_no},\r\n              \"fields\":[\"price_list\"]\r\n            },\r\n            callback:function(r)\r\n            {\r\n                 if(r)\r\n                 {\r\n                    console.log(cur_frm.doc.item_code);\r\n                    console.log(cur_frm.doc.batch_no);\r\n                    console.log(r.message.length);\r\n                    if(r.message.length !==0)\r\n                    {\r\n                      msgprint(\"Already exist price list of \"+ cur_frm.doc.item_code +\" in batch  \"+ cur_frm.doc.batch_no);\r\n                      validated=false;\r\n                      return false;\r\n                    } \r\n                    else\r\n                    { \r\n                      if(frm.doc.price_list!==\"\")\r\n\t\t              {\r\n\t\t                if(frm.doc.price_list_3==\"Price To Customer - (PTC)\")\r\n\t\t                {\r\n\t\t                  //   msgprint(\"Price List 1 Added Successfully\");\r\n\t\t                }\r\n\t\t             }  \r\n                \t if(frm.doc.price_list_2!==\"\")\r\n\t            \t {\r\n\t\t                if(frm.doc.price_list_2==\"Price To Franchaisee - (PTF)\")\r\n\t\t                     {\r\n\t\t                      //  msgprint(\"Price List 2 Added Successfully\");\r\n\t\t                     }\r\n\t\t              }\r\n\t            \t  if(frm.doc.price_list_3!==\"\")\r\n\t\t              {\r\n\t\t                if(frm.doc.price_list_3==\"Price To Customer - (PTC)\")\r\n\t\t                {\r\n\t\t                  //   msgprint(\"Price List 3 Added Successfully\");\r\n\t\t                }\r\n\t\t               }  \r\n                    }\r\n                 }\r\n            }\r\n        });  \r\n\t    }\r\n\t    \r\n\t   \r\n\t},\r\n    \r\n\t\r\n\t\r\n    after_save(frm) \r\n        {  \r\n      \r\n        var e=frappe.defaults.get_user_defaults(\"Company\");\r\n        if(e[0]==\"AVANZA\" && t==\"Internal\")\r\n        {\r\n                frappe.db.insert\r\n                ({\r\n                    doctype:'Item Price',\r\n                    item_code:frm.doc.item_code,\r\n                    price_list:\"Price To Franchaisee - (PTF)\",\r\n                    price_list_rate:frm.doc.rate_for_price_list_2,\r\n                    rate_for_price_list_2:0,\r\n                    rate_for_price_list_3:0,\r\n                    batch_no:frm.doc.batch_no\r\n                })\r\n         \r\n                .then(function(doc)\r\n                { \r\n            console.log(`${doc.doctype} ${doc.name} created on ${doc.creation}`);\r\n         });\r\n                frappe.db.insert\r\n                ({\r\n            doctype:'Item Price',\r\n            item_code:frm.doc.item_code,\r\n            //item_code:pp[0].item_code,\r\n            price_list:\"Price To Customer - (PTC)\",\r\n            price_list_rate:frm.doc.rate_for_price_list_3,\r\n            rate_for_price_list_2:0,\r\n            rate_for_price_list_3:0,\r\n            batch_no:frm.doc.batch_no,\r\n          // batch_no:pp[0].batch_no\r\n          })\r\n                .then(function(doc)\r\n                { \r\n              console.log(`${doc.doctype} ${doc.name} created on ${doc.creation}`);\r\n            });\r\n        } \r\n        else if(e[0]==\"AVANZA\" && t==\"External\")\r\n        {\r\n            frappe.db.insert\r\n          ({\r\n            doctype:'Item Price',\r\n            item_code:frm.doc.item_code,\r\n            price_list:\"Price To Customer - (PTC)\",\r\n            price_list_rate:frm.doc.rate_for_price_list_3,\r\n            rate_for_price_list_2:0,\r\n            rate_for_price_list_3:0,\r\n            batch_no:frm.doc.batch_no\r\n          })\r\n          .then(function(doc)\r\n          { \r\n              console.log(`${doc.doctype} ${doc.name} created on ${doc.creation}`);\r\n            }); \r\n            \r\n        }\r\n        \r\n        else if(e[0]!=\"AVANZA\" && t==\"External\")\r\n        {\r\n            frappe.db.insert\r\n          ({\r\n            doctype:'Item Price',\r\n            item_code:frm.doc.item_code,\r\n            price_list:\"Price To Customer - (PTC)\",\r\n            price_list_rate:frm.doc.rate_for_price_list_3,\r\n            rate_for_price_list_2:0,\r\n            rate_for_price_list_3:0,\r\n            batch_no:frm.doc.batch_no\r\n          })\r\n          .then(function(doc)\r\n          { \r\n              console.log(`${doc.doctype} ${doc.name} created on ${doc.creation}`);\r\n            }); \r\n            \r\n        }\r\n        \r\n        else if(e[0]!=\"AVANZA\" && t==\"Internal\")\r\n        {\r\n            frappe.db.insert\r\n          ({\r\n            doctype:'Item Price',\r\n            item_code:frm.doc.item_code,\r\n            price_list:\"Price To Customer - (PTC)\",\r\n            price_list_rate:frm.doc.rate_for_price_list_3,\r\n            rate_for_price_list_2:0,\r\n            rate_for_price_list_3:0,\r\n            batch_no:frm.doc.batch_no\r\n          })\r\n          .then(function(doc)\r\n          { \r\n              console.log(`${doc.doctype} ${doc.name} created on ${doc.creation}`);\r\n            }); \r\n            \r\n        }\r\n        \r\n       \r\n    }\r\n       \r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 1,
  "modified": "2021-11-25 12:14:16.525642",
  "name": "Sales Invoice-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "//code added by Webeaz\r\nfrappe.ui.form.on('Sales Invoice', {\r\n    onload_post_render: function(frm) {\r\n     $(\"form>.frappe-control input\").css(\"text-transform\", \"uppercase\");\r\n    \r\n       \r\n        var t2=frappe.get_list(\"Sales Invoice\");\r\n        console.log(t2);\r\n        var t3=t2[0].company;\r\n        console.log(t3);\r\n        if(t3==\"AVANZA\")\r\n        {\r\n            \r\n            frm.set_value(\"naming_series\",\"SGAVZ-.YY.-\");\r\n            \r\n        }\r\n        else if(t3==\"SG EDAPPAL\")\r\n        {\r\n          frm.set_value(\"naming_series\",\"SGE-.YY.-\") ;\r\n          frm.set_df_property('naming_series', 'read_only', true);\r\n        }\r\n        else if(t3==\"SG KONDOTTY\")\r\n        {\r\n          frm.set_value(\"naming_series\",\"SGKTY-.YY.-\") ;\r\n          frm.set_df_property('naming_series', 'read_only', true);\r\n        }\r\n        else if(t3==\"SG PERUMPADAPPU\")\r\n        {\r\n          frm.set_value(\"naming_series\",\"SGP-.YY.-\") ;\r\n          frm.set_df_property('naming_series', 'read_only', true);\r\n        }\r\n        \r\n        \r\n    },\r\n    \r\n    after_save(frm)\r\n    {\r\n    //     console.log(\"dddddddd\")\r\n    //     var r1=frm.doc.grand_total;\r\n \t  //   console.log(r1);\r\n \t  //   frm.set_value(\"grand_total_amount\",r1);\r\n \t  //    frm.refresh(\"grand_total_amount\");\r\n \t},\r\n//  \trefresh(frm)\r\n//  \t{\r\n \t    \r\n//         var r11=frm.doc.grand_total;\r\n//  \t     console.log(r11);\r\n//  \t     frm.set_value(\"grand_total_amount\",r11);\r\n//  \t      frm.refresh(\"grand_total_amount\");\r\n \t    \r\n//  \t}\r\n    \r\n});\r\n//Code Added by Efeone\r\nfrappe.ui.form.on('Sales Invoice Item', {\r\n\tposa_is_offer:function(frm,cdt,cdn){\r\n        var d=locals[cdt][cdn];\r\n        if(d.posa_is_offer==1){\r\n            frappe.model.set_value(cdt,cdn,\"rate\",0);\r\n        }\r\n\t}\r\n});\r\n\r\n//Code Added by Webeaz\r\n\r\n// var r;\r\n// var i;\r\n// frappe.ui.form.on('Sales Invoice Item', {\r\n// \trate: function(frm, cdt,cdn) {\r\n// \t\tvar d = locals[cdt][cdn];\r\n// \t\tr=d.rate;\r\n// \t\tfrm.trigger('selling_price_list');\r\n// \t},\r\n//     item_code:function(frm,cdt,cdn)\r\n//     {\r\n//         var d3=locals[cdt][cdn];\r\n//         var r=d3.item_code;\r\n//         var d=locals[cdt][cdn];\r\n//         var pp=d.default_mrp\r\n//         var w3=d.default_strip_conversion_factor\r\n//         var tyr=pp/w3\r\n//         frappe.model.set_value(cdt,cdn,\"mrp\",tyr)  //Already setting by fetchfrom\r\n//         frappe.call({\r\n//             \"method\":\"frappe.client.get\",\r\n//             \"args\":{\r\n//                 \"doctype\":\"Item\",\r\n//                 \"filters\":{\"item_code\":r},\r\n               \r\n//             },\r\n//             callback:function(u)\r\n//             {\r\n//                  if(u)\r\n//                  {\r\n//                      var d13=u.message.uoms\r\n//                      var lastElement = d13[d13.length - 1];\r\n//                      frappe.model.set_value(cdt,cdn,\"default_strip_conversion_factor\",lastElement.conversion_factor)\r\n//                  }\r\n//             }\r\n//         });\r\n//     },\r\n// \tposa_is_offer:function(frm,cdt,cdn){\r\n//         var d=locals[cdt][cdn];\r\n//         if(d.posa_is_offer==1){\r\n//             frappe.model.set_value(cdt,cdn,\"rate\",0);\r\n//         }\r\n//         if(d.posa_is_offer===0){\r\n//             frappe.model.set_value(cdt,cdn,\"rate\",r);\r\n//         }\r\n// \t}\r\n//  });",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Receipt",
  "enabled": 1,
  "modified": "2021-11-22 12:17:42.342686",
  "name": "Purchase Receipt-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Purchase Receipt',\r\n{\r\n\tonload(frm) {\r\n\t\t// your code here\r\n\t\tvar t2=frappe.get_list(\"Purchase Receipt\");\r\n        console.log(t2);\r\n        var t3=t2[0].company;\r\n        console.log(t3);\r\n        if(t3==\"AVANZA\")\r\n        {\r\n            \r\n            frm.set_value(\"naming_series\",\"PUR-AVZ-.YYYY.-\");\r\n        }\r\n        else if(t3==\"SG EDAPPAL\")\r\n        {\r\n           frm.set_value(\"naming_series\",\"PUR-SGE-.YYYY.-\") ;\r\n           frm.set_df_property('naming_series', 'read_only', true);\r\n        }\r\n        else if(t3==\"SG KONDOTTY\")\r\n        {\r\n           frm.set_value(\"naming_series\",\"PUR-SGKTY-.YYYY.-\") ;\r\n           frm.set_df_property('naming_series', 'read_only', true);\r\n        }\r\n        else if(t3==\"SG PERUMPADAPPU\")\r\n        {\r\n           frm.set_value(\"naming_series\",\"PUR-SGP-.YYYY.-\") ;\r\n           frm.set_df_property('naming_series', 'read_only', true);\r\n        }\r\n        \r\n        \r\n\t}\r\n});\r\n\r\nvar tt;\r\nvar ii;\r\nvar bb;\r\nfrappe.ui.form.on(\"Purchase Receipt Item\",\r\n{\r\n    // rate:function(frm,cdt,cdn)\r\n    // {\r\n    //     var d2=locals[cdt][cdn];\r\n    //     if(d2.rate>0)\r\n    //     {\r\n    //         tt=d2.rate;\r\n    //         console.log(tt);\r\n    //     }\r\n    // },\r\n    // free:function(frm,cdt,cdn)\r\n    // {\r\n    //     var d=locals[cdt][cdn];\r\n    //     if(d.free==1)\r\n    //     {\r\n    //         frappe.model.set_value(cdt,cdn,\"rate\",0);\r\n    //     }\r\n    //     if(d.free===0)\r\n    //     {\r\n    //         frappe.model.set_value(cdt,cdn,\"rate\",tt);\r\n    //     }\r\n    // },\r\n    discount:function(frm,cdt,cdn)\r\n    {\r\n        // var d1=locals[cdt][cdn];\r\n        // if(d1.discount>0)\r\n        // {\r\n        //     console.log(\"Discount Entered\");\r\n        //     var result=d1.rate-d1.rate*d1.discount/100;\r\n        //     frappe.model.set_value(cdt,cdn,\"rate\",result);\r\n        // }\r\n        \r\n        var d1=locals[cdt][cdn];\r\n        console.log(d1);\r\n        var t4=d1.discount;\r\n        var t5=d1.price_list_rate;\r\n        \r\n        var t7=t5*t4;\r\n        console.log(t7);\r\n        var t8=t7/100;\r\n        console.log(t8);\r\n        var t11=(t5-t8);\r\n        if(t11>0)\r\n        {\r\n             frappe.model.set_value(cdt,cdn,\"rate\",t11);\r\n        }\r\n        else\r\n        {\r\n            frappe.model.set_value(cdt,cdn,\"rate\",t5);\r\n        }\r\n    },\r\n    item_code:function(frm,cdt,cdn)\r\n    {\r\n        var d3=locals[cdt][cdn];\r\n        console.log(d3.item_code);\r\n        ii=d3.item_code;\r\n        if(d3.item_code.charAt(0)==\"E\")\r\n        {\r\n            var p1=[];\r\n            console.log(\"External Item Added\",ii);\r\n            frappe.call({\r\n                \"method\" : \"frappe.client.get_list\",\r\n                \"args\" :\r\n                {\r\n                    \"doctype\" : \"Item\",\r\n                    \"filters\" : {\"item_code\":ii},\r\n                    \"fields\"  :[\"drug_content\"] \r\n                },\r\n                callback:function(r)\r\n                {\r\n                    if(r)\r\n                    {\r\n                        console.log(r);\r\n                        p1=r.message[0].drug_content;\r\n                        console.log(\"r1r1r1r1r1rr\",p1);\r\n                        frappe.call\r\n                        ({\r\n                            \"method\":\"frappe.client.get_list\",\r\n                            \"args\":\r\n                            {\r\n                                \"doctype\":\"Item\",\r\n                                \"filters\":{\"drug_content\":p1,\"purchase_type\":\"Internal\"},\r\n                                \"fields\":[\"item_name\"]\r\n                            },\r\n                            callback:function(r1)\r\n                            {\r\n                                console.log(\"Internal Item\",r1);\r\n                                var neww=r1.message;\r\n                                var neww2=[];\r\n                                for( var i=0;i<neww.length;i++)\r\n                                {\r\n                                    console.log(neww[i].item_name);\r\n                                    var neww1=neww[i].item_name;\r\n                                    neww2.push(neww1);\r\n                                }\r\n                                console.log(\"weeeeeeeeeeeeeeeeeeeeeeeee\",neww2);\r\n                                frappe.msgprint({\r\n                                    title:__('Notification'),\r\n                                    indicator:'green',\r\n                                    message:__(\"You have similar Product in Storegenrix:\"+neww2)\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n    batch_no:function(frm,cdt,cdn)\r\n    {\r\n        var d6=locals[cdt][cdn];\r\n        \r\n        // msgprint(\"heloooo..\");\r\n        //  var child = locals[cdt][cdt].items; \r\n      // grid_row = cur_frm.fields_dict.items.grid.grid_rows_by_docname[\"new-purchase-receipt-1\"];\r\n       \r\n      // field = frappe.utils.filter_dict(grid_row.docfields, {fieldname: \"batch_no\"});\r\n\r\n        // console.log(child);\r\n        // console.log(\"batch    \"+d6.batch_no);\r\n        bb=d6.batch_no;\r\n        frappe.call\r\n        ({\r\n            \"method\":\"frappe.client.get_list\",\r\n            \"args\":\r\n            {\r\n                \"doctype\":\"Item Price\",\r\n                \"filters\":{\"item_code\":ii,\"batch_no\":bb},\r\n                \"fields\":[\"price_list\",\"price_list_rate\"]\r\n            },\r\n            callback:function(r)\r\n            {\r\n                if(r)\r\n                {\r\n                    if(r.message.length===0)\r\n                    {\r\n                        frappe.model.set_value(cdt,cdn,\"company_buying_rate\",\"None\");\r\n                        frappe.model.set_value(cdt,cdn,\"price_to_franchise_rate\",\"None\");\r\n                        frappe.model.set_value(cdt,cdn,\"price_to_customer_rate\",\"None\");\r\n                    }\r\n                    console.log(\"baatches item pricee\",r);\r\n                    for(var i=0;i<r.message.length;i++)\r\n                    {\r\n                        if(r.message[i].price_list==\"Company Buying\")\r\n                        {\r\n                            frappe.model.set_value(cdt,cdn,\"company_buying_rate\",r.message[i].price_list_rate);\r\n                        }\r\n                        if(r.message[i].price_list==\"Price To Franchaisee - (PTF)\")\r\n                        {\r\n                            frappe.model.set_value(cdt,cdn,\"price_to_franchise_rate\",r.message[i].price_list_rate);\r\n                        }\r\n                        if(r.message[i].price_list==\"Price To Customer - (PTC)\")\r\n                        {\r\n                            frappe.model.set_value(cdt,cdn,\"price_to_customer_rate\",r.message[i].price_list_rate);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    },\r\n    set_prices:function(frm,cdt,cdn)\r\n    {\r\n         var d7=locals[cdt][cdn];\r\n        console.log(d7);\r\n        var t1=d7.item_code;\r\n        console.log(\"item\",t1)\r\n        \r\n        frappe.call\r\n        ({\r\n            \"method\":\"frappe.client.get_list\",\r\n            \"args\":\r\n            {\r\n                \"doctype\":\"Item\",\r\n                \"filters\":{\"item_code\":t1},\r\n                \"fields\":[\"purchase_type\"]\r\n            },\r\n            callback:function(r)\r\n            {\r\n                if(r)\r\n                {\r\n                    console.log(r.message[0].purchase_type);\r\n                    var t5=r.message[0].purchase_type;\r\n                    console.log(t5,\"TRTRTRTR\");\r\n                    \r\n                    \r\n                    if(t5===\"Internal\")\r\n                     {\r\n                         console.log(\"UUUUUUU\");\r\n                        \r\n                        let d5=new frappe.ui.Dialog\r\n         ({\r\n             title:\"Set Prices\",\r\n             fields:\r\n             [\r\n                {\r\n                   label:\"Item Code\",\r\n                   fieldname:'item',\r\n                   fieldtype:'Data',\r\n                 },\r\n                {\r\n                  label:\"Company Buying Rate\",\r\n                  fieldname:'c_b_r',\r\n                  fieldtype:'Data',\r\n                },\r\n                {\r\n                  label:\"Price to Franchise(PTF)\",\r\n                  fieldname:'ptf',\r\n                  fieldtype:'Data',\r\n                },\r\n                {\r\n                  label:\"Price to Customer(PTC)\",\r\n                  fieldname:'ptc',\r\n                  fieldtype:'Data',\r\n                },\r\n                {\r\n                  label:\"Batch Name\",\r\n                  fieldname:'batch',\r\n                  fieldtype:'Data',\r\n                },\r\n                ],\r\n                primary_action_label:\"Add Prices\",\r\n                primary_action(values)\r\n                {\r\n                    console.log(values),\r\n                    ii=values.item;\r\n                    bb=values.batch;\r\n                    \r\n                    \r\n                    frappe.db.insert\r\n                    ({\r\n                        doctype:'Item Price',\r\n                        item_code:d7.item_code,\r\n                        price_list:\"Company Buying\",\r\n                        price_list_rate:values.c_b_r,\r\n                        batch_no:d7.batch_no\r\n                    });\r\n                    frappe.db.insert\r\n                    ({\r\n                        doctype:'Item Price',\r\n                        item_code:d7.item_code,\r\n                        price_list:\"Price To Franchaisee - (PTF)\",\r\n                        price_list_rate:values.ptf,\r\n                        batch_no:d7.batch_no\r\n                    });\r\n                    frappe.db.insert({\r\n                        doctype:'Item Price',\r\n                        item_code:d7.item_code,\r\n                        price_list:\"Price To Customer - (PTC)\",\r\n                        price_list_rate:values.ptc,\r\n                        batch_no:d7.batch_no\r\n                    });\r\n                    msgprint(\"Prices added successfully\");\r\n                    d5.hide();\r\n                }\r\n        });\r\n        d5.show();\r\n        d5.fields_dict.item.set_value(d7.item_code);\r\n        d5.fields_dict.item.refresh();\r\n        d5.fields_dict.batch.set_value(d7.batch_no);\r\n        d5.fields_dict.batch.refresh();\r\n                     }\r\n                     else\r\n                     {\r\n                         console.log(\"QQQQQQQQQ\")\r\n                              let d5=new frappe.ui.Dialog\r\n                             ({\r\n                                 title:\"Set Prices\",\r\n                                fields:\r\n                                                 [\r\n                                 {\r\n                                     label:\"Item Code\",\r\n                                      fieldname:'item',\r\n                                     fieldtype:'Data',\r\n                                 },\r\n               \r\n                {\r\n                  label:\"Price to Franchise(PTF)\",\r\n                  fieldname:'ptf',\r\n                  fieldtype:'Data',\r\n                },\r\n                {\r\n                  label:\"Price to Customer(PTC)\",\r\n                  fieldname:'ptc',\r\n                  fieldtype:'Data',\r\n                },\r\n                {\r\n                  label:\"Batch Name\",\r\n                  fieldname:'batch',\r\n                  fieldtype:'Data',\r\n                },\r\n                ],\r\n                primary_action_label:\"Add Prices\",\r\n                primary_action(values)\r\n                {\r\n                    console.log(values),\r\n                    ii=values.item;\r\n                    bb=values.batch;\r\n                    \r\n                    frappe.db.insert\r\n                    ({\r\n                        doctype:'Item Price',\r\n                        item_code:d7.item_code,\r\n                        price_list:\"Price To Franchaisee - (PTF)\",\r\n                        price_list_rate:values.ptf,\r\n                        batch_no:d7.batch_no\r\n                    });\r\n                    frappe.db.insert\r\n                    ({\r\n                        doctype:'Item Price',\r\n                        item_code:d7.item_code,\r\n                        price_list:\"Price To Customer - (PTC)\",\r\n                        price_list_rate:values.ptc,\r\n                        batch_no:d7.batch_no\r\n                    });\r\n                    msgprint(\"Prices added successfully\");\r\n                    d5.hide();\r\n                }\r\n        });\r\n        d5.show();\r\n        d5.fields_dict.item.set_value(d7.item_code);\r\n        d5.fields_dict.item.refresh();\r\n        d5.fields_dict.batch.set_value(d7.batch_no);\r\n        d5.fields_dict.batch.refresh();\r\n                     }\r\n                    \r\n                    \r\n                }\r\n            }\r\n        });\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Invoice",
  "enabled": 0,
  "modified": "2021-10-28 14:35:40.693653",
  "name": "Purchase Invoice-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Purchase Invoice', {\n\tonload(frm){\n\t\tvar batches=[];;\n        var dates=[];\n        if(frm.doc.supplier && frm.doc.company && frm.doc.supplier!==\"Internal Supplier SG\"){\n            frappe.call({\n                \"method\":\"frappe.client.get\",\n                \"args\":{\n                    \"doctype\":\"Purchase Receipt\",\n                    \"filters\":{\"company\":frm.doc.company,\"supplier\":frm.doc.supplier}\n                },\n                callback:function(r){\n                    if(r){\n                        console.log(r);\n                        console.log(r.message.items);\n                        var j=0;\n                        $.each(r.message.items, function(i, item) {\n                            console.log(\"egfegerf\");\n                            console.log(j);\n                            batches[j] = item.batch_no;\n                            dates[j]=item.batch_expiry_date;\n                            j=j+1;\n                            console.log(item.batch_no);\n                        });\n                        var j=0;\n                        console.log(batches);\n                        $.each(frm.doc.items, function(i, item) {\n                            item.batch_no=batches[j];\n                            item.expiry_date=dates[j];\n                            j=j+1;\n                        });\n                        frm.refresh_field(\"items\");\n                        frm.refresh();\n                    \n                    }\n                    else{\n                        return false;\n                    }\n                }\n            });\n        }\n        else{\n            console.log(\"Intercompany Purchase Invoice\");\n            frm.set_value(\"update_stock\",false);\n        }\n\t}\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2021-11-26 16:32:47.313893",
  "name": "Purchase Order-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Purchase Order', {\n\tonload(frm) {\n\t    var t2=frappe.get_list(\"Purchase Order\");\n        console.log(t2);\n        var t3=t2[0].company;\n        console.log(t3);\n        if(t3==\"AVANZA\")\n        {\n            \n            frm.set_value(\"naming_series\",\"PUR-AVZ-.YYYY.-\");\n        }\n        else if(t3==\"SG EDAPPAL\")\n        {\n           frm.set_value(\"naming_series\",\"PUR-SGE-.YYYY.-\");\n           frm.set_df_property('naming_series', 'read_only', true);\n        }\n        else if(t3==\"SG KONDOTTY\")\n        {\n           frm.set_value(\"naming_series\",\"PUR-SGKTY-.YYYY.-\");\n           frm.set_df_property('naming_series', 'read_only', true);\n        }\n        else if(t3==\"SG PERUMPADAPPU\")\n        {\n           frm.set_value(\"naming_series\",\"PUR-SGP-.YYYY.-\");\n           frm.set_df_property('naming_series', 'read_only', true);\n        }\n\t\n\t}\n});\n\nfrappe.ui.form.on('Purchase Order Item', {\n  item_code: function(frm, cdt, cdn){\n    var child = locals[cdt][cdn];\n    if(child.item_code.charAt(0)==\"E\"){\n        var p1=[];\n        var y=child.item_code\n        frappe.call({\n            \"method\" : \"frappe.client.get_list\",\n            \"args\" : {\n                \"doctype\" : \"Item\",\n                \"filters\" : {\"item_code\":y},\n                \"fields\"  :[\"drug_content\"]\n            },\n            callback:function(r){\n                if(r){\n                    console.log(r);\n                    console.log(r.message[0]);\n                    p1=r.message[0].drug_content\n                    console.log(\"r1r1r1r1r1rr\",p1);\n                    frappe.call({\n                        \"method\":\"frappe.client.get_list\",\n                        \"args\":{\n                            \"doctype\":\"Item\",\n                            \"filters\":{\"drug_content\":p1,\"purchase_type\":\"Internal\"},\n                            \"fields\":[\"item_name\"]\n                        },\n                        callback:function(r1){\n                                console.log(r1);\n                                var neww=r1.message;\n                                var neww2=[];\n                                for( var i=0;i<neww.length;i++){\n                                    console.log(neww[i].item_name)\n                                    var neww1=neww[i].item_name;\n                                    neww2.push(neww1)\n                                }\n                                frappe.msgprint({\n                                    title:__('Notification'),\n                                    indicator:'green',\n                                    message:__(\"You have similar Product in Storegenrix:\"+neww2)\n                                })\n                        }\n                    })\n                }\n            }\n        });\n    }\n    else{\n        console.log(child.item_code);\n        frappe.call({\n            method: 'frappe.client.get',\n            args: {\n                'doctype': 'Item',\n                'filters': {'item_code': child.item_code}\n            },\n            callback: function(r){\n                if(r.message.superseded_from){\n                frappe.msgprint({\n                    title: __('Notification'),\n                    indicator: 'green',\n                    message: __('Item '+r.message.superseded_from+' is superseded by '+child.item_code)\n                });\n                }\n            }\n        });\n    }\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Batch",
  "enabled": 0,
  "modified": "2021-11-23 10:08:21.423161",
  "name": "Batch-Form",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Batch', {\n\tonload(frm) {\n\t   var s1=frappe.defaults.get_user_defaults(\"company\");\n\t   console.log(\"Company\",s1[0]);\n\t   if(s1[0]!=\"AVANZA\")\n\t        {\n\t            \n\t            cur_frm.set_df_property(\"batch_qty\", \"hidden\", true);\n\t       }\n\t\t\n\t}\n});",
  "view": "Form"
 }
]